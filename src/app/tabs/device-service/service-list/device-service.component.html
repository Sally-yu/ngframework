<div id="content">
    <app-service-detail *ngIf="serviceDetail" [service]="service" [option]="option" [parentCom]="'服务列表'"
                      (result)="cancel($event)"></app-service-detail>
    <div *ngIf="!serviceDetail">
      <nz-layout style="padding:24px 0; background: transparent">
        <nz-content style="padding: 0 24px; min-height: 280px;">
          <div id="list-tool">
            <label>
              <input type="text" nz-input placeholder="输入关键字搜索" [(ngModel)]="searchValue" (ngModelChange)="search()">
            </label>
            <div id="btns">
              <button nz-button (click)="reFresh()">刷新</button>
              <button nz-button nzType="primary" (click)="addNewOpcRow()">新增</button>
            </div>
          </div>
          <nz-table #basicTable [nzData]="serviceList" [nzLoading]="loading">
            <thead>
            <tr>
              <th nzWidth="100px">#</th>
              <th>客户端名称</th>
              <th>客户端地址</th>
              <th>端口号</th>
              <!-- <th>服务位置</th> -->
              <!-- <th>OPC类型</th> -->
              <th>采集频率</th>
              <th>状态</th>
              <th>操作</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let data of basicTable.data">
              <td>{{serviceList.indexOf(data) + 1}}</td>
              <td>{{data.servername}}</td>
              <td>{{data.serveraddress}}</td>
              <td>{{data.serverport}}</td>
              <!-- <td>{{data.serverlocation}}</td> -->
              <!-- <td>{{data.opctype}}</td> -->
              <td>{{data.interval}}ms</td>
              <td>
                  <div *ngIf="data.opcstate=='false'" nz-button  nzShape="circle" [nzSize]="small" style="width: 25px;height: 25px; background-color: #bfbfbf"></div>
                  <div *ngIf="data.opcstate=='true'" nz-button  nzLoading nzType="primary" nzShape="circle" [nzSize]="small" style="width: 25px;height: 25px; background-color: #095df8"></div>
              </td>
              
              <td>
                  <a style="font-size: 15px;" (click)="editRow(data.serveraddress)">编辑</a>
                  <nz-divider nzType="vertical"></nz-divider>
                  <a *ngIf="!toBoolean(data.opcstate)"  [id]="data.servername" style="color:rgb(67, 34, 255);font-size: 15px;"  (click)="startOPCServer(data.servername,data.serveraddress)">启动</a>
                  <a *ngIf="toBoolean(data.opcstate)" style="color:#F22;font-size: 15px;" (click)="stopOPCServer(data.serveraddress)">停止</a>
                  <nz-divider nzType="vertical"></nz-divider>
                  <a style="color:#F22;" nz-popconfirm nzTitle="确定删除?" (nzOnConfirm)="remove(data.serveraddress)">删除</a>
              </td>
            </tr>
            </tbody>
          </nz-table>
        </nz-content>
      </nz-layout>
    </div> 
  </div>
    
    