<app-add-db-mgr *ngIf="addFlag" parentCom="数据源管理" [option]='option' [selectData]="selectData" [dataAll]="dataAll"
  (result)="cancel($event)"></app-add-db-mgr>
<!-- 数据源管理页面 -->
<div id="content" *ngIf="!addFlag">
    <nz-layout style="padding:24px 0; background: transparent">
        <nz-content style="padding: 0 24px; min-height: 280px;">
          <div id="list-tool">
            <label>
              <input type="text" nz-input placeholder="输入关键字搜索" [(ngModel)]="searchValue" (ngModelChange)="search()">
            </label>
            <div id="btns">
              <button nz-button (click)="getList()">刷新</button>
              <button nz-button nzType="primary" (click)="add()">新增</button>
            </div>
          </div>
          <nz-table #basicTable [nzData]="dataAll">
            <thead>
            <tr>
              <th nzWidth="100px">#</th>
              <th>服务器名称</th>
              <th>IP地址</th>
              <th>数据库名称</th>
              <th>类型</th>
              <th>操作</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let data of basicTable.data">
              <td>{{dataAll.indexOf(data) + 1}}</td>   
              <td>{{data.servername}}</td>
              <td>{{data.serverip}}</td>
              <td>{{data.database}}</td>
              <td>{{data.databasetype}}</td>
              <td>
                <a (click)="edit(data.serverip)">编辑</a>
                <nz-divider nzType="vertical"></nz-divider>
                <a (click)="connection(data)">测试连接</a>
                <nz-divider nzType="vertical"></nz-divider>
                <a style="color:#F22;" nz-popconfirm nzTitle="确定删除?" (nzOnConfirm)="remove(data.serverip)">删除</a>
              </td>
            </tr>
            </tbody>
          </nz-table>
        </nz-content>
      </nz-layout>
    </div>  