<!-- <div *ngIf="show; then thenBlock; else elseBlock"></div>
<ng-template #thenBlock> -->
  <div id="content">
    <nz-layout style="padding:24px 0; background: transparent">
        <nz-content style="padding: 0 24px; min-height: 280px;">
          <div id="list-tool">
            <label>
              <input type="text" nz-input placeholder="输入关键字搜索" [(ngModel)]="searchValue" (ngModelChange)="search()">
            </label>
            <div id="btns">
              <button nz-button (click)="reFresh()">刷新</button>
              <button nz-button nzType="primary" (click)="addNewDatabase()">新增</button>
            </div>
          </div>
          <nz-table #basicTable [nzData]="dataSet">
            <thead>
            <tr>
              <th nzWidth="100px">#</th>
              <th>服务器名称</th>
              <th>IP地址</th>
              <th>数据库名称</th>
              <th>类型</th>
              <th>操作</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let data of basicTable.data">
              <td>{{dataSet.indexOf(data) + 1}}</td>   
              <td>{{data.servername}}</td>
              <td>{{data.serverip}}</td>
              <td>{{data.database}}</td>
              <td>{{data.databasetype}}</td>
              <td>
                <a (click)="editRow(data.serverip)">编辑</a>
                <nz-divider nzType="vertical"></nz-divider>
                <a (click)="connection(data)">测试连接</a>
                <nz-divider nzType="vertical"></nz-divider>
                <a style="color:#F22;" nz-popconfirm nzTitle="确定删除?" (nzOnConfirm)="deleteRow(data.serverip)">删除</a>
              </td>
            </tr>
            </tbody>
          </nz-table>
        <!-- </ng-template>
        <ng-template #elseBlock> -->
          <nz-drawer
            [nzClosable]="false"
            [nzVisible]="show"
            nzPlacement="right"
            (nzOnClose)="goback()"
            [nzWidth]=500>
          <div style="margin-bottom: 16px;">
              <button nz-button [nzType]="'primary'" (click)="save()" style="margin-left: 0%;">保存</button>
              <button nz-button (click)="goback()">返回</button>
              <button *ngIf="!isAddnewRow" nz-button (click)="connection(editData)"><i class="icon-database"></i>连接测试</button>
            </div>
            <nz-content>
              <div nz-col nzSpan="10" [nzOffset]="0"> 
                  <div nz-row nzGutter="8">
                    <nz-form-item >
                      <nz-form-label>服务器名称</nz-form-label>
                      <input nz-input   [(ngModel)]="editData.servername">
                    </nz-form-item> 
                  </div> 
                  <div nz-row nzGutter="8">
                      <nz-form-item >
                          <nz-form-label>服务端IP</nz-form-label>
                          <input nz-input   [(ngModel)]="editData.serverip"  onkeyup="this.value=this.value.replace(/[^\d|.]/g,'')" required>
                      </nz-form-item>
                  </div> 
                  <div nz-row nzGutter="8">
                      <nz-form-item>
                          <nz-form-label>端口号</nz-form-label>
                          <input nz-input type="text"  [(ngModel)]="editData.serverport">
                      </nz-form-item>
                  </div>  
                  <div nz-row nzGutter="8">
                      <nz-form-item>
                          <nz-form-label>数据库类型</nz-form-label>
                          <nz-select  style="width: 100%"  nzShowSearch nzAllowClear [(ngModel)]="editData.databasetype">
                            <nz-option nzLabel="时序数据库" nzValue="时序数据库"></nz-option>
                            <nz-option nzLabel="关系数据库" nzValue="关系数据库"></nz-option>
                            <nz-option nzLabel="文档数据库" nzValue="文档数据库"></nz-option>
                          </nz-select>
                      </nz-form-item>
                  </div>                                  
              </div>
              <div nz-col nzSpan="10" [nzOffset]="1"> 
                  <div nz-row nzGutter="8">
                      <nz-form-item>
                          <nz-form-label>数据库名称</nz-form-label>
                          <input nz-input   [(ngModel)]="editData.database">
                      </nz-form-item>
                  </div> 
                  <div nz-row nzGutter="8">
                      <nz-form-item>
                          <nz-form-label>用户名</nz-form-label>
                          <input nz-input type="text"  [(ngModel)]="editData.username">
                      </nz-form-item>
                  </div> 
                  <div nz-row nzGutter="8">
                      <nz-form-item>
                          <nz-form-label>密码</nz-form-label>
                          <input nz-input type="password"  [(ngModel)]="editData.password">
                      </nz-form-item>
                  </div>  
                  <div nz-row nzGutter="8">
                      <nz-form-item>
                          <nz-form-label>描述</nz-form-label>
                          <input nz-input type="text"  [(ngModel)]="editData.description">
                      </nz-form-item>
                  </div>                                  
              </div>
            </nz-content>
          </nz-drawer>
        </nz-content>
      </nz-layout>
    </div>  
    <!-- </ng-template> -->