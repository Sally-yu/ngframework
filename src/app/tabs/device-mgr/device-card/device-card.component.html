<div id="content">
  <app-device-detail *ngIf="deviceDetail" [device]="device" [option]="option" [parentCom]="'设备卡片'"
                     (result)="cancel($event)"></app-device-detail>

  <app-device-table *ngIf="deviceTable" [device]="device" (result)="cancel($event)"></app-device-table>

  <div style="padding: 16px" *ngIf="!deviceDetail&&!deviceTable">
    <div id="toolbar">
      <div id="status">
        <div style="background-color: #2ecc71;"></div>
        <span>运行</span>

        <div style="background-color: #e74c3c;"></div>
        <span>停机</span>
      </div>
      <div id="search">
        <input nz-input [(ngModel)]="searchValue" (ngModelChange)="search()" placeholder="请输入关键字搜索">
        <!--<button nz-button title="刷新频率" (click)="connectWs()" nzType="primary">{{interval}}S</button>-->
        <button nz-button  nzType="primary" [nzLoading]="loading"><i nz-icon
                                                                                        nzType="reload"
                                                                                        nzTheme="outline"></i></button>
        <button nz-button (click)="add()" nzType="primary" [nzLoading]="loading"><i nz-icon
                                                                                    nzType="plus"
                                                                                    nzTheme="outline"></i></button>
      </div>
    </div>
    <nz-list [nzDataSource]="viewList" [nzRenderItem]="item"
             [nzGrid]="{ gutter: 16, span: 6 ,xs:24 ,sm:24,md:12,lg:12,xl:8,xxl:8}"
             [nzPagination]="pagination" [nzLoading]="loading">
      <ng-template #item let-item>
        <nz-list-item [nzContent]="nzContent">
          <ng-template #nzContent>
            <div class="card" (click)="edit(item.key)">
              <div class="title" [title]="'备注  '+item.note"
                   [ngStyle]="{'background-color':item['devicesetting']['cardcolor']}">
                {{item.name}}
                <i nz-icon (click)="$event.stopPropagation();toTable(item.key)" nzType="pie-chart" title="设备图表"
                   nzTheme="outline" style="float: right"></i>
              </div>

              <div class="card-content">
                <div style="height: 30px;width: 100%;font-size: 20px;font-weight: bold;color:#000000;">
                  {{item.code}}
                </div>
                <div *ngFor="let att of display(item)"
                     [ngStyle]="{'height':200/row(item)+'px','padding-top':100/row(item)-64+'px','width':width(item,att)}">
                  <span>{{keyValue(item.key, att.code)}}</span><br>
                  {{att.name}}
                </div>
              </div>
              <div [id]="item.key" style="height: 50px"></div>

            </div>
          </ng-template>
        </nz-list-item>
      </ng-template>
    </nz-list>

    <ng-template #pagination>
      <nz-pagination [nzPageIndex]="currentIndex" [nzTotal]="deviceList.length"
                     (nzPageIndexChange)="indexChange($event)" (nzPageSizeChange)="sizeChange($event)" nzShowSizeChanger
                     [nzPageSize]="pageSize"
                     [nzPageSizeOptions]="[3,6,9,15]"></nz-pagination>
    </ng-template>

  </div>
</div>
